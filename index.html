<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Ethereum Mining Setup Guide - Ubuntu Server 15.10 Bare Metal</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Ethereum Mining Setup Guide - Ubuntu Server 15.10 Bare Metal</h1>
        <p></p>
 
         <p class="view"><a href="https://github.com/mflukerngx/setup-guide">View the Project on GitHub <small>mflukerngx/setup-guide</small></a></p>
        <ul>
         <li><a href="https://github.com/mflukerngx/setup-guide/zipball/master">Download <strong>ZIP File</strong></a></li>
         <li><a href="https://github.com/mflukerngx/setup-guide/tarball/master">Download <strong>TAR Ball</strong></a></li>          <li><a href="https://github.com/mflukerngx/setup-guide">View On <strong>GitHub</strong></a></li>
       </ul>
      </header>
      <section>
        <h3>
<a id="page-title" class="anchor" href="#page-title" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Ethereum Mining Guide - Ubuntu Server 15.10 Bare Metal.</h3>

<p>With all the recent announcements of TMX Group having an interest in blockchain and decentralized technologies I decided to explore the world of Ethereum and specifically Ether mining to get a better understanding of the various components. The result was this build guide which I patched together from a number of different sources. Your milage may vary, the official Ethereum forms and  Ethereum subreddits have lots of good information. As do the various GitHub Wiki’s.</p>

<h3>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>References</h3>

<p><a href="https://www.gitbook.com/book/ethereum/frontier-guide/details">Frontier Guide Details</a></p>
<p><a href="http://ethereum.stackexchange.com/questions/1161/what-is-geths-fast-sync-and-why-is-it-faster">Geth fast sync and why it's faster.</a></p>
<p><a href="https://github.com/ethereum/webthree-umbrella/wiki/Building-on-Ubuntu">Building on Ubuntu.</a></p>

<h3>
<a id="system-setup" class="anchor" href="#system-setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>System Setup</h3>

<ol>
  <li>Select Hardware</li>
  <ol type="a">
    <li>In my case we had a few HP Z400 workstations that were being retired. This system has 6 GB RAM and an Intel Xeon Processor 2.66 GHZ, Quad-Core with Hyperthreading. It’s a triple channel system so I have the RAM running at the highest possible speed of 1066.</li>
    <li>This system originally had two 2 x 1GB Quadro 600 cards in it, but that wasn’t enough memory to do GPU mining. So I needed to upgrade, since this was just an experiment I chose the cheapest cards that would work, <a href="http://www.memoryexpress.com/Products/MX61000">GeForce 710s</a>. I purchased them for $64 from a local store. These cards fit snuggly into the two PCI Express x16 Gen 2 slots.</li>
  </ol>
  <li>Download <a href="http://mirror.csclub.uwaterloo.ca/ubuntu-releases/15.10/ubuntu-15.10-server-amd64.iso">Ubuntu Server 64bit</a></li>
    <ol type="a">
        <li>Don’t panic if you are running an Intel based system but the download has the word AMD in it. It is still for the x86-64 instruction set extension</li>
    </ol>
  <li>Burn it to a CD or USB so you can boot off of it</li>
  <li>Install Ubuntu Server</li>
    <ol type="a">
        <li>Accept all the default installation values and made one logical volume</li>
        <li>Add OpenSSH server</li>
    </ol>
  <li>At this point you should have Ubuntu properly installed be ready to download the required software</li>
    <img src="images/image1.jpg" alt="Ubuntu Installed" class="inline"/>
  <li>Install Ethereum</li>
    <ol type="a">
        <li>You need to install some basic dependencies first. Then add the ethereum repository, update your list of repositories, then go ahead and install ethereum.</li>
<pre>
  <code>
    sudo apt-get install software-properties-common
    sudo add-apt-repository ppa:ethereum/ethereum
    sudo apt-get update
    sudo apt-get install ethereum
  </code>
</pre>

    </ol>

    <li>Verify Install</li>
    <ol type="a">
        <li>You can verify the install by using “Geth”. Geth is the command line interface for an Ethereum node.</li>
        <li><pre><code>geth version</code></pre></li>
        <img src="images/image2.jpg" alt="Geth Version" class="inline"/>
    </ol>

    <li>Create Account</li>
    <ol type="a">
        <li>You need an account on the network to participate</li>
        <li><code>geth account new</code></li>
        <li>It will ask you the secure your account with a password. Use and strong password and be sure to remember it.</li>
        <li>It will then display your address on the network.</li>
    </ol>

    <li>Downloading the blockchain</li>
    <ol type="a">
        <li>Before mining you need to download the blockchain</li>
        <li><pre><code>geth --fast</code></pre></li>
        <li>This will start up your node and begin to download the block chain. The --fast switch speeds up this process with can be lengthy. Instead of processing the entire block-chain one link at a time, and replay all transactions that ever happened in history, fast syncing downloads the transaction receipts along the blocks, and pulls an entire recent state database. You will notice the block chain number start to increment up as you go. This process can take anywhere from 20mins to hours depending on your network setup.</li>
        <img src="images/image3.jpg" alt="Blockchain Download" class="inline"/>
        <li>You can check how far you are along the blockchain by checking this <a href="https://ethstats.net">website</a>. It has all sorts of interesting information but you are interested in Best Block #.</li>
        <li>If you are having trouble connecting make sure UpNp is enabled on your router. Geth needs to open up some ports to communicate to the rest of the network.</li>
        <li>When you have the entire blockchain downloaded a message will appear and say Blockchain synchronized</li>
    </ol>
    <li>Install the C++ version of Ethereum</li>
    <ol type="a">
      <li>You need the C++ Version of Ethereum to get the ethminer application. Ethminer is the stand alone mining application. Geth does has GPU mining but it doesn’t appear to be fully supported at this time. Most guides seem to take this approach.</li>
      <li>Add the additional repositories, update the repositories and install the C++ version</li>
<pre>
  <code>
    sudo add-apt-repository ppa:ethereum/ethereum-qt
    sudo add-apt-repository ppa:ethereum/ethereum-dev
    sudo apt-get update
    sudo apt-get install cpp-ethereum
  </code>
</pre>

        <li>Check the version of ethermine</li>
            <ol type="a">
                <li>Now that you have the C++ version of Ethereum installed you will have access to a set of new tools.</li>
                <li>Check your version of ethminer</li>
                <li><pre><code>ethminer -v</code></pre></li>
                <img src="images/image4.jpg" alt="Ethminer version" class="inline"/>
            </ol>
        <li>Download the CUDA (openCL)  drivers</li>
        <ol type="a">
            <li>Since I installed GeForce 710s into this system. I need to download and installed the Nvidia CUDA drivers. That will give the system openCL support. These instructions are for Nvidia chipsets only. AMD/ATI openCl is a different process</li>
            <li>Go to the <a href="https://developer.nvidia.com/cuda-downloads">Nvidia website </a> to find the most up to date drivers</li>
            <li>Download them onto your mining server.</li>
<pre>
 <code>
  wget http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1504/x86_64/cuda-repo-ubuntu1504_7.5-18_amd64.deb
  sudo dpkg -i cuda-repo-ubuntu1504_7.5-18_amd64.deb
  sudo apt-get update
  sudo apt-get install cuda
 </code>
</pre>
            <li>The CUDA toolkit is a large install includes a bunch of thing that are probably not needed but GPU performance is key so I want to ensure I have the latest and greatest drivers. You could just download the drivers stand alone from Nvidia.</li>
            <li>After the install is done, reboot to get that drivers properly loaded.</li>
        </ol>

        <li>Verify that ethemine can see the video cards properly</li>
        <ol type="a">
            <li><pre><code>ethminer --list-devices</code></pre></li>
            <img src="images/image5.jpg" alt="Devices" class="inline"/>
        </ol>
    </ol>
    Congrats!  You now have everything installed and you are ready to start mining.
</ol>

          <h3><a id="mining" class="anchor" href="#mining" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mining</h3>

          <ol>
              <li>In one session startup geth in rpc mode with console so you can see what is happening</li>
              <ol type="a">
                  <li><pre><code>mine1@node1:~$ geth --rpc console</code></pre></li>
                  <li>Starting it in RPC mode allows ethminer to connect to geth</li>
              </ol>
              <li>In another session startup ethminer</li>
              <ol type="a">
                  <li><pre><code>ehtminer -G</code></pre></li>
                  <li>The -G tells it to mine using GPU. After it creates the DAG file it should go to work mining.</li>
                  <img src="images/image6.jpg" alt="GPU" class="inline"/>
                  <li>As you are mining along it should look something like this. You can see it is using both GPUs in the system.</li>
                  <img src="images/image7.jpg" alt="GPU 2" class="inline"/>
              </ol>

              <li>Check Ether balance</li>
              <ol type="a">
                  <li>Use the geth console to see if you have successfully mined any ether</li>
                  <li><pre><code>web3.fromWei(eth.getBalance(eth.coinbase), "ether")</code></pre></li>
                  <img src="images/image8.jpg" alt="Balance" class="inline"/>
              </ol>

              <li>Ethereum Mining Calculator</li>
              <ol>
                  <li>Use the Ethereum <a href="https://etherscan.io/ether-mining-calculator">mining calculator</a>  to estimate how long it will take you to find one block</li>
                  <li>You need to convert you harsh rate per second to MH/S second</li>
              </ol>
          </ol>

          <h3><a id="next-steps" class="anchor" href="#next-steps" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Next steps</h3>
          <p>I would like to work on startup and shutdown scripts for the various applications as well as consider joining a mining pool.</p>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/mflukerngx">mflukerngx</a></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
